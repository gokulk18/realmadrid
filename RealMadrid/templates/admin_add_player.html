{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="index.html">
    <meta name="description" content="Awesome responsive dashboard build with Tailwind CSS &amp; AlpineJS.">
    
    <title>Madrid Admin</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <link rel="stylesheet" href="{% static 'css/main.css' %}">

    <link rel="icon" type="image/svg+xml" href="assets/images/logo.svg">

    <script defer src="{% static 'js/main.js' %}"></script>
</head>
<style>
.tabs {
  display: flex;
  border-bottom: 2px solid #ccc;
}
.tab {
    font-family: RMNeue, Arial, Helvetica; /* Font family */

  font-size: 1rem;
  font-weight: 500;
  color: #5E6A83;
  padding: 10px 20px;
  cursor: pointer;
  text-decoration: none;
  border-bottom: 2px solid transparent;
  transition: color 0.3s, border-bottom-color 0.3s;
}
.tab:hover {
  color: #000;
}
.tab.active {
  color: #3b82f6;
  border-bottom-color: #3b82f6;
}
.tab-content {
  display: none;
  padding: 20px;
}
.tab-content.active {
  display: block;
}
.alert {
    padding: 15px;
    color: #fff;
    background-color: #4caf50; /* Green (or use dynamic color based on message type) */
    border-radius: 5px;
    position: relative;
    transition: opacity 1s ease-out;
    opacity: 1; /* Start fully visible */
    display: block; /* Ensure it's initially displayed */
}

.alert.hide {
    opacity: 0; /* Fade out */
}

.alert-container {
    position: relative;
}

/* Updated styles for select and options */
select {
    color: #000000 !important;
    background-color: #ffffff !important;
}

select option {
    color: #000000 !important;
    background-color: #ffffff !important;
    padding: 8px !important;
}

/* Additional specific styles */
#position {
    color: #000000 !important;
}

#position option {
    color: #000000 !important;
    background-color: #ffffff !important;
    padding: 8px !important;
}

/* Style for when option is selected/hovered */
#position option:checked,
#position option:hover {
    background-color: #e5e7eb !important;
    color: #000000 !important;
}

/* Style for the select when opened */
#position:focus {
    color: #000000 !important;
    background-color: #ffffff !important;
}

/* Style for the dropdown menu */
select::-ms-expand {
    background-color: #333333;
}

select:-moz-focusring {
    color: transparent !important;
    text-shadow: 0 0 0 #000 !important;
}

/* Additional specific styles for preferred foot dropdown as well */
#preferred_foot option {
    color: #000000 !important;
    background-color: #ffffff !important;
    padding: 8px !important;
}

/* Style for when option is selected/hovered */
#preferred_foot option:checked,
#preferred_foot option:hover {
    background-color: #e5e7eb !important;
    color: #000000 !important;
}

/* Style for the select when opened */
#preferred_foot:focus {
    color: #000000 !important;
    background-color: #ffffff !important;
}

/* Ensure black text for all dropdown options */
select option:not(:checked) {
    color: #000000 !important;
}

/* Modern Card Styles */
.form-card {
    background: linear-gradient(145deg, #ffffff, #f5f7fa);
    border-radius: 20px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.18);
    backdrop-filter: blur(10px);
}

.form-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.12);
}

/* Modern Input Styles */
.modern-input {
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    padding: 12px 16px;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    width: 100%;
}

.modern-input:focus {
    background: #fff;
    border-color: #3b82f6;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    outline: none;
}

/* Select Dropdown Styling */
.modern-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236B7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-position: right 12px center;
    background-repeat: no-repeat;
    background-size: 20px;
    padding-right: 40px !important;
}

/* Card Headers */
.card-header {
    position: relative;
    padding-bottom: 12px;
    margin-bottom: 20px;
    border-bottom: 2px solid #e5e7eb;
}

.card-header::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 60px;
    height: 2px;
    background: #3b82f6;
}

/* Form Labels */
.form-label {
    font-weight: 500;
    color: #374151;
    margin-bottom: 8px;
    display: block;
    font-size: 0.9rem;
}

/* Submit Button Enhancement */
.submit-btn {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white;
    padding: 14px 28px;
    border-radius: 12px;
    font-weight: 600;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.2);
}

.submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px -2px rgba(59, 130, 246, 0.3);
}

.season-stat-entry {
    position: relative;
    transition: all 0.3s ease;
}

.season-stat-entry:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.remove-season-stat {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
    padding: 4px;
    border-radius: 50%;
    transition: all 0.2s ease;
}

.remove-season-stat:hover {
    background-color: rgba(239, 68, 68, 0.1);
}
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Select all alerts
        const alerts = document.querySelectorAll('.alert');

        alerts.forEach(alert => {
            // Show each alert for 3 seconds
            setTimeout(() => {
                // Add 'hide' class to fade out
                alert.classList.add('hide');
                
                // Remove the alert from the DOM after fade-out
                setTimeout(() => {
                    alert.style.display = 'none';
                }, 1000); // Time to wait after fade-out (should match CSS transition duration)
            }, 3000); // Time to show the alert
        });
    });

</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var navLinks = document.querySelectorAll('.navbar-nav .nav-link');
  
    navLinks.forEach(function(link) {
        link.addEventListener('click', function() {
            navLinks.forEach(function(navLink) {
                navLink.classList.remove('active');
            });
            this.classList.add('active');
        });
    });
  });
  

  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var tabs = document.querySelectorAll('.tab');
      
      tabs.forEach(function (tab) {
        tab.addEventListener('click', function (e) {
          e.preventDefault(); // Prevent the default anchor behavior
          
          var url = tab.getAttribute('href');
          if (url && url !== '#') {
            window.location.href = url; // Redirect to the specified URL
          }
        });
      });
      
      // Set the "Show Squad" tab as default and selected
      var defaultTab = document.getElementById('showSquadTab');
      if (defaultTab) {
        defaultTab.classList.add('active'); // Ensure it's visually active
      }
    });
  </script>
<body class="overflow-hidden">
    <div x-data="{ sidebarOpen: false }" class="relative flex h-screen text-gray-800 bg-white font-roboto">
        <div x-cloak :class="sidebarOpen ? 'block' : 'hidden'" @click="sidebarOpen = false" class="fixed inset-0 z-20 transition-opacity bg-black opacity-50 lg:hidden"></div>

<div x-cloak :class="sidebarOpen ? 'translate-x-0 ease-in' : '-translate-x-full ease-out'" class="fixed inset-y-0 left-0 z-30 w-64 px-4 overflow-y-auto transition duration-200 transform bg-white border-r border-gray-100 lg:translate-x-0 lg:relative lg:inset-0 ">
  <div class="flex items-center mt-8">
    <!-- Logo Image -->
    <img class="w-auto h-12" src="{% static 'madrid_images/real-madrid-logo.png' %}" alt="Real Madrid Logo">
    
    <!-- Text next to the Logo -->
    <span class="ml-3 font-medium capitalize text-lg flex items-center" style="margin-top: 10px;margin-left: 11px;">Real Madrid FC</span>
</div>

    <hr class="my-6 border-gray-100">

    <nav class="space-y-8">
        <div class="space-y-4">    
            <a class="flex items-center px-4 py-2 text-gray-600 transition-colors duration-200  " href="{% url 'admin_dashboard' %}">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
    
                <span class="mx-3 font-m capitalize">Dashboard</span>
            </a>
    
            <a class="flex items-center px-4 py-2 text-gray-500 transition-colors duration-300 transform bg-gray-200 rounded-lg bg-opacity-50 rounded-lg hover:text-gray-600 hover:bg-gray-100 bg-opacity-40" href="{% url 'admin_squad_list' %}">
                <span class="material-symbols-outlined">
                    groups
                    </span>
    
                <span class="mx-3 font-medium capitalize active">Squad</span>
            </a>        
            <a class="flex items-center px-4 py-2 text-gray-500 transition-colors duration-300 transform " href="{% url 'admin_show_news' %}">
                <span class="material-symbols-outlined">
                    newspaper
                    </span>                    
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
    
                <span class="mx-3 font-medium capitalize active">News</span>
            </a>   
            <a class="flex items-center px-4 py-2 text-gray-500 transition-colors duration-300 transform rounded-lg hover:text-gray-600 hover:bg-gray-100 bg-opacity-40 " href="{% url 'admin_view_store' %}">
                <span class="material-symbols-outlined">
                    shopping_bag
                    </span>
    
                <span class="mx-3 font-medium capitalize active">Store</span>
            </a>
            <a class="flex items-center px-4 py-2 text-gray-500 transition-colors duration-300 transform rounded-lg hover:text-gray-600 hover:bg-gray-100 bg-opacity-40 " href="{% url 'admin_view_orders' %}">
                <span class="material-symbols-outlined">
                    shopping_bag
                    </span>
    
                <span class="mx-3 font-medium capitalize active">orders</span>
            </a>
            
            <a class="flex items-center px-4 py-2 text-gray-500 transition-colors duration-300 transform rounded-lg hover:text-gray-600 hover:bg-gray-100 bg-opacity-40 " href="{% url 'admin_stadium' %}">
                <span class="material-symbols-outlined">
                    stadium
                    </span>
    
                <span class="mx-3 font-medium capitalize active">Stadium</span>
            </a>
            <a class="flex items-center px-4 py-2 text-gray-500 transition-colors duration-300 transform rounded-lg hover:text-gray-600 hover:bg-gray-100 bg-opacity-40 " href="{% url 'admin_ticket_stats' %}">
                <span class="material-symbols-outlined">
                    stadium
                    </span>
    
                <span class="mx-3 font-medium capitalize active">Tickets Stats</span>
            </a>

        </div>
    </nav>
</div>
        <div class="flex flex-col flex-1 overflow-hidden bg-gray-100">
            <header class="bg-white border-b border-gray-100">
    <div class="flex items-center justify-between px-4 py-4 sm:px-6">
        <div class="flex items-center">
            <button @click="sidebarOpen = !sidebarOpen" class="text-gray-500 lg:hidden focus:outline-none">
                <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 6H20M4 12H20M4 18H11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
    
            <div class="relative" x-data="{ search: '' }" @click.away="search = ''">
    <div class="relative mx-4 lg:mx-0">
        <span class="absolute inset-y-0 left-0 flex items-center pl-3">
            <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none">
                <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </span>
    
        <input x-model="search" type="text" class="w-32 h-10 py-2 pl-10 pr-4 text-gray-700 placeholder-gray-400 transition-all duration-150 bg-white border border-gray-200 rounded-md focus:w-44 sm:w-64 sm:focus:w-80 focus:border-indigo-400 focus:outline-none focus:ring focus:ring-indigo-300 focus:ring-opacity-40" placeholder="Find anything...">
    </div>

    <div class="absolute right-0 z-20 w-full py-2 mt-2 space-y-4 overflow-hidden bg-white rounded-md shadow-xl"
        x-show="search.length > 0" 
        x-cloak 
        x-transition:enter="transition ease-out duration-100 transform"
        x-transition:enter-start="opacity-0 scale-95" 
        x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="transition ease-in duration-75 transform"
        x-transition:leave-start="opacity-100 scale-100" 
        x-transition:leave-end="opacity-0 scale-95"
    >
    </div>
</div>        </div>
    
        <div class="flex items-center">
           
    
            <div x-data="{ dropdownOpen: false }" class="relative inline-block">
                <button @click="dropdownOpen = ! dropdownOpen" class="relative z-10 flex items-center flex-shrink-0 text-sm text-gray-600 focus:outline-none">
                    <img class="flex  w-8 h-8 " src="{% static 'madrid_images/real-madrid-logo.png' %}" alt="Real Madrid Logo">
                </button>
    
                <div class="absolute right-0 z-20 w-56 py-2 mt-2 overflow-hidden bg-white rounded-md shadow-xl rtl:right-auto rtl:left-0"
                    x-show="dropdownOpen" 
                    x-cloak 
                    x-transition:enter="transition ease-out duration-100 transform"
                    x-transition:enter-start="opacity-0 scale-95" 
                    x-transition:enter-end="opacity-100 scale-100"
                    x-transition:leave="transition ease-in duration-75 transform"
                    x-transition:leave-start="opacity-100 scale-100" 
                    x-transition:leave-end="opacity-0 scale-95"
                    @click.away="dropdownOpen = false"
                >
                    <a href="profile.html" class="flex items-center p-3 -mt-2 text-sm text-gray-600 transition-colors duration-200 transform hover:bg-gray-100">
                        <img class="flex mx-1 full w-9 h-9" src="{% static 'madrid_images/real-madrid-logo.png' %}" alt="Real Madrid Logo" >
                        <div class="mx-1">
                            {% comment %} <h1 class="text-sm font-semibold text-gray-700">John Doe</h1>
                            <p class="text-sm text-gray-500">johndoe@example.com</p> {% endcomment %}
                        </div>
                    </a>
    
                    <hr class="border-gray-200 ">
                    
                    {% comment %} <a href="profile.html" class="block px-4 py-2 text-sm text-gray-600 capitalize transition-colors duration-200 transform hover:bg-gray-100">
                        Profile
                    </a>
                    
                    <a href="profile.html" class="block px-4 py-2 text-sm text-gray-600 capitalize transition-colors duration-200 transform hover:bg-gray-100">
                        Settings
                    </a> {% endcomment %}
    
                    <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-gray-600 capitalize transition-colors duration-200 transform hover:bg-gray-100">
                        Sign Out
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>

            <main class="flex-1 overflow-y-auto bg-gray-50">
                <div class="px-4 sm:px-6">
                    <div class="container mx-auto py-8">
                        {% if messages %}
                        <div class="alert-container mb-6">
                            {% for message in messages %}
                                {% if 'add_player' in message.tags %}
                                    <div class="alert {{ message.tags }} transform transition-all duration-300 hover:scale-102">
                                        {{ message }}
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                        {% endif %}

                        <!-- Modern Tabs -->
                        <div class="tabs bg-white rounded-xl shadow-md mb-8 p-1 inline-flex gap-2">
                            <a href="{% url 'admin_add_player' %}" class="tab active font-semibold px-6 py-3 rounded-lg transition-all duration-300" id="addMemberTab">Add Member</a>
                            <a href="{% url 'admin_squad_list' %}" class="tab font-semibold px-6 py-3 rounded-lg transition-all duration-300" id="">Show Squad</a>
                        </div>

                        <!-- Main content grid with improved spacing -->
                        <div class="grid grid-cols-1 gap-8">
                            <form id="playerForm" enctype="multipart/form-data">
                                {% csrf_token %}
                                
                                <!-- Basic Player Information -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header">
                                        <h3 class="text-xl font-semibold text-gray-800">Basic Information</h3>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="form-label">Jersey Number</label>
                                            <input type="text" id="jersey_num" name="jersey_num" required class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Player Name</label>
                                            <input type="text" id="player_name" name="player_name" required class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Country</label>
                                            <input type="text" id="player_country" name="player_country" required class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Position</label>
                                            <select id="player_position" name="player_position" required class="modern-input modern-select">
                                                {% for position in positions %}
                                                    <option value="{{ position.id }}">{{ position.position }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div>
                                            <label class="form-label">Role</label>
                                            <input type="text" id="player_role" name="player_role" required class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Player Image</label>
                                            <input type="file" id="player_image" name="player_image" accept="image/*" class="modern-input">
                                        </div>
                                    </div>
                                </div>

                                <!-- Physical Information -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header">
                                        <h3 class="text-xl font-semibold text-gray-800">Physical Information</h3>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label class="form-label">Date of Birth</label>
                                            <input type="date" id="date_of_birth" name="date_of_birth" class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Height (m)</label>
                                            <input 
                                                type="number" 
                                                step="0.01" 
                                                min="0" 
                                                max="3" 
                                                id="height" 
                                                name="height" 
                                                placeholder="1.80"
                                                class="modern-input"
                                                onchange="this.value = parseFloat(this.value).toFixed(2)"
                                            >
                                        </div>
                                        <div>
                                            <label class="form-label">Weight (kg)</label>
                                            <input 
                                                type="number" 
                                                step="0.01" 
                                                min="0" 
                                                max="150" 
                                                id="weight" 
                                                name="weight" 
                                                placeholder="75.00"
                                                class="modern-input"
                                                onchange="this.value = parseFloat(this.value).toFixed(2)"
                                            >
                                        </div>
                                    </div>
                                </div>

                                <!-- Statistics -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header">
                                        <h3 class="text-xl font-semibold text-gray-800">Career Statistics</h3>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label class="form-label">Appearances</label>
                                            <input type="number" id="appearances" name="appearances" value="0" class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Goals</label>
                                            <input type="number" id="goals" name="goals" value="0" class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Assists</label>
                                            <input type="number" id="assists" name="assists" value="0" class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Clean Sheets</label>
                                            <input type="number" id="clean_sheets" name="clean_sheets" value="0" class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Yellow Cards</label>
                                            <input type="number" id="yellow_cards" name="yellow_cards" value="0" class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Red Cards</label>
                                            <input type="number" id="red_cards" name="red_cards" value="0" class="modern-input">
                                        </div>
                                    </div>
                                </div>

                                <!-- Contract Information -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header">
                                        <h3 class="text-xl font-semibold text-gray-800">Contract Information</h3>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="form-label">Joined Date</label>
                                            <input type="date" id="joined_date" name="joined_date" class="modern-input">
                                        </div>
                                        <div>
                                            <label class="form-label">Contract End Date</label>
                                            <input type="date" id="contract_end_date" name="contract_end_date" class="modern-input">
                                        </div>
                                    </div>
                                </div>

                                <!-- Biography -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header">
                                        <h3 class="text-xl font-semibold text-gray-800">Biography</h3>
                                    </div>
                                    <div>
                                        <label class="form-label">Player Biography</label>
                                        <textarea id="biography" name="biography" rows="4" class="modern-input"></textarea>
                                    </div>
                                </div>

                                <!-- Season Stats -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h3 class="text-xl font-semibold text-gray-800">Current Season Statistics</h3>
                                        <button type="button" id="addSeasonStatBtn" class="px-4 py-2 text-sm text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 transition-colors">
                                            + Add League Statistics
                                        </button>
                                    </div>
                                    
                                    <div id="seasonStatsContainer">
                                        <div class="season-stat-entry border rounded p-4 mb-4">
                                            <div class="flex justify-end mb-2">
                                                <button type="button" class="remove-season-stat text-red-500 hover:text-red-700">
                                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                    </svg>
                                                </button>
                                            </div>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label class="form-label">Season</label>
                                                    <input type="text" 
                                                           name="season[]" 
                                                           placeholder="2023/2024" 
                                                           class="modern-input" 
                                                           required>
                                                </div>
                                                <div>
                                                    <label class="form-label">Competition</label>
                                                    <input type="text" 
                                                           name="competition[]" 
                                                           placeholder="LaLiga" 
                                                           class="modern-input" 
                                                           required>
                                                </div>
                                                <div>
                                                    <label class="form-label">Appearances</label>
                                                    <input type="number" 
                                                           name="season_appearances[]" 
                                                           value="0" 
                                                           min="0" 
                                                           class="modern-input">
                                                </div>
                                                <div>
                                                    <label class="form-label">Goals</label>
                                                    <input type="number" 
                                                           name="season_goals[]" 
                                                           value="0" 
                                                           min="0" 
                                                           class="modern-input">
                                                </div>
                                                <div>
                                                    <label class="form-label">Assists</label>
                                                    <input type="number" 
                                                           name="season_assists[]" 
                                                           value="0" 
                                                           min="0" 
                                                           class="modern-input">
                                                </div>
                                                <div>
                                                    <label class="form-label">Minutes Played</label>
                                                    <input type="number" 
                                                           name="minutes_played[]" 
                                                           value="0" 
                                                           min="0" 
                                                           class="modern-input">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Add this after the Season Stats section and before the Submit Button -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header">
                                        <h3 class="text-xl font-semibold text-gray-800">Player Achievements</h3>
                                    </div>
                                    <div class="achievement-container">
                                        <div class="achievement-fields mb-4">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label class="form-label">Achievement Title</label>
                                                    <input type="text" 
                                                           id="achievement_title" 
                                                           name="achievement_title" 
                                                           class="modern-input" 
                                                           placeholder="e.g., Champions League Winner">
                                                </div>
                                                <div>
                                                    <label class="form-label">Achievement Date</label>
                                                    <input type="date" 
                                                           id="achievement_date" 
                                                           name="achievement_date" 
                                                           class="modern-input">
                                                </div>
                                                <div class="md:col-span-2">
                                                    <label class="form-label">Achievement Description</label>
                                                    <textarea id="achievement_description" 
                                                            name="achievement_description" 
                                                            class="modern-input" 
                                                            rows="3" 
                                                            placeholder="Describe the achievement..."></textarea>
                                                </div>
                                            </div>
                                            <div class="flex justify-end mt-4">
                                                <button type="button" 
                                                        id="addMoreAchievement" 
                                                        class="px-4 py-2 text-sm text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 transition-colors">
                                                    + Add Another Achievement
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Career History section -->
                                <div class="form-card p-8 mb-8">
                                    <div class="card-header">
                                        <h3 class="text-xl font-semibold text-gray-800">Career History</h3>
                                    </div>
                                    <div class="career-history-container">
                                        <div class="career-history-fields mb-4">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <label class="form-label">Previous Club</label>
                                                    <input type="text" 
                                                           name="previous_club" 
                                                           class="modern-input" 
                                                           placeholder="e.g., Manchester United">
                                                </div>
                                                <div>
                                                    <label class="form-label">Start Date</label>
                                                    <input type="date" 
                                                           name="career_start_date" 
                                                           class="modern-input"
                                                           required>
                                                </div>
                                                <div>
                                                    <label class="form-label">End Date</label>
                                                    <input type="date" 
                                                           name="career_end_date" 
                                                           class="modern-input">
                                                </div>
                                                <div>
                                                    <label class="form-label">Appearances</label>
                                                    <input type="number" 
                                                           name="career_appearances" 
                                                           class="modern-input"
                                                           min="0"
                                                           value="0">
                                                </div>
                                                <div>
                                                    <label class="form-label">Goals</label>
                                                    <input type="number" 
                                                           name="career_goals" 
                                                           class="modern-input"
                                                           min="0"
                                                           value="0">
                                                </div>
                                            </div>
                                            <div class="flex justify-end mt-4">
                                                <button type="button" 
                                                        id="addMoreCareerHistory" 
                                                        class="px-4 py-2 text-sm text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 transition-colors">
                                                    + Add Another Club
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Submit Button -->
                                <div class="flex justify-center mt-10">
                                    <button type="submit" id="submitBtn" class="submit-btn">
                                        Add Player
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Add this JavaScript before the closing body tag -->
    <script>
    document.getElementById('submitBtn').addEventListener('click', function(e) {
        e.preventDefault();
        
        // Create FormData object
        const formData = new FormData();
        
        // Add all form fields to FormData
        formData.append('jersey_num', document.getElementById('jersey_num').value);
        formData.append('player_name', document.getElementById('player_name').value);
        formData.append('player_country', document.getElementById('player_country').value);
        formData.append('player_position', document.getElementById('player_position').value);
        formData.append('player_role', document.getElementById('player_role').value);
        formData.append('date_of_birth', document.getElementById('date_of_birth').value);
        formData.append('height', document.getElementById('height').value);
        formData.append('weight', document.getElementById('weight').value);
        formData.append('appearances', document.getElementById('appearances').value);
        formData.append('goals', document.getElementById('goals').value);
        formData.append('assists', document.getElementById('assists').value);
        formData.append('clean_sheets', document.getElementById('clean_sheets').value);
        formData.append('yellow_cards', document.getElementById('yellow_cards').value);
        formData.append('red_cards', document.getElementById('red_cards').value);
        formData.append('joined_date', document.getElementById('joined_date').value);
        formData.append('contract_end_date', document.getElementById('contract_end_date').value);
        formData.append('biography', document.getElementById('biography').value);
        formData.append('season', document.getElementById('season').value);
        formData.append('competition', document.getElementById('competition').value);
        formData.append('minutes_played', document.getElementById('minutes_played').value);
        
        // Handle file upload
        const imageFile = document.getElementById('player_image').files[0];
        if (imageFile) {
            formData.append('player_image', imageFile);
        }

        // Add achievements
        const achievements = [];
        const achievementTitles = document.querySelectorAll('[name="achievement_title"]');
        const achievementDates = document.querySelectorAll('[name="achievement_date"]');
        const achievementDescriptions = document.querySelectorAll('[name="achievement_description"]');

        for (let i = 0; i < achievementTitles.length; i++) {
            if (achievementTitles[i].value) {  // Only add if title exists
                achievements.push({
                    title: achievementTitles[i].value,
                    date: achievementDates[i].value,
                    description: achievementDescriptions[i].value
                });
            }
        }

        formData.append('achievements', JSON.stringify(achievements));

        // Update the career history collection in form submission
        const careerHistory = [];
        const previousClubs = document.querySelectorAll('[name="previous_club"]');
        const careerStartDates = document.querySelectorAll('[name="career_start_date"]');
        const careerEndDates = document.querySelectorAll('[name="career_end_date"]');
        const careerAppearances = document.querySelectorAll('[name="career_appearances"]');
        const careerGoals = document.querySelectorAll('[name="career_goals"]');

        for (let i = 0; i < previousClubs.length; i++) {
            if (previousClubs[i].value) {  // Only add if club name exists
                careerHistory.push({
                    club: previousClubs[i].value,
                    start_date: careerStartDates[i].value,
                    end_date: careerEndDates[i].value || null,
                    appearances: parseInt(careerAppearances[i].value) || 0,
                    goals: parseInt(careerGoals[i].value) || 0
                });
            }
        }

        formData.append('career_history', JSON.stringify(careerHistory));

        // Send POST request to your backend
        fetch('{% url "admin_add_player" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
            },
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('Player and achievements added successfully!');
                window.location.href = '{% url "admin_squad_list" %}';
            } else {
                alert('Error: ' + data.error);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while adding the player');
        });
    });

    // Update the dynamic career history fields addition
    document.getElementById('addMoreCareerHistory').addEventListener('click', function() {
        const container = document.querySelector('.career-history-container');
        const newFields = document.createElement('div');
        newFields.className = 'career-history-fields mb-4 pt-4 border-t border-gray-200';
        newFields.innerHTML = `
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="form-label">Previous Club</label>
                    <input type="text" 
                           name="previous_club" 
                           class="modern-input" 
                           placeholder="e.g., Manchester United">
                </div>
                <div>
                    <label class="form-label">Start Date</label>
                    <input type="date" 
                           name="career_start_date" 
                           class="modern-input"
                           required>
                </div>
                <div>
                    <label class="form-label">End Date</label>
                    <input type="date" 
                           name="career_end_date" 
                           class="modern-input">
                </div>
                <div>
                    <label class="form-label">Appearances</label>
                    <input type="number" 
                           name="career_appearances" 
                           class="modern-input"
                           min="0"
                           value="0">
                </div>
                <div>
                    <label class="form-label">Goals</label>
                    <input type="number" 
                           name="career_goals" 
                           class="modern-input"
                           min="0"
                           value="0">
                </div>
            </div>
            <div class="flex justify-end mt-2">
                <button type="button" 
                        class="remove-career-history px-4 py-2 text-sm text-red-600 border border-red-600 rounded-lg hover:bg-red-50 transition-colors">
                    Remove
                </button>
            </div>
        `;

        container.appendChild(newFields);

        // Add remove functionality
        newFields.querySelector('.remove-career-history').addEventListener('click', function() {
            newFields.remove();
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        const seasonStatsContainer = document.getElementById('seasonStatsContainer');
        const addSeasonStatBtn = document.getElementById('addSeasonStatBtn');

        // Template for new season stats entry
        const seasonStatTemplate = `
            <div class="season-stat-entry border rounded p-4 mb-4">
                <div class="flex justify-end mb-2">
                    <button type="button" class="remove-season-stat text-red-500 hover:text-red-700">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="form-label">Season</label>
                        <input type="text" 
                               name="season[]" 
                               placeholder="2023/2024" 
                               class="modern-input" 
                               required>
                    </div>
                    <div>
                        <label class="form-label">Competition</label>
                        <input type="text" 
                               name="competition[]" 
                               placeholder="LaLiga" 
                               class="modern-input" 
                               required>
                    </div>
                    <div>
                        <label class="form-label">Appearances</label>
                        <input type="number" 
                               name="season_appearances[]" 
                               value="0" 
                               min="0" 
                               class="modern-input">
                    </div>
                    <div>
                        <label class="form-label">Goals</label>
                        <input type="number" 
                               name="season_goals[]" 
                               value="0" 
                               min="0" 
                               class="modern-input">
                    </div>
                    <div>
                        <label class="form-label">Assists</label>
                        <input type="number" 
                               name="season_assists[]" 
                               value="0" 
                               min="0" 
                               class="modern-input">
                    </div>
                    <div>
                        <label class="form-label">Minutes Played</label>
                        <input type="number" 
                               name="minutes_played[]" 
                               value="0" 
                               min="0" 
                               class="modern-input">
                    </div>
                </div>
            </div>
        `;

        // Add new season stats entry
        addSeasonStatBtn.addEventListener('click', function() {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = seasonStatTemplate.trim();
            seasonStatsContainer.appendChild(tempDiv.firstChild);
        });

        // Remove season stats entry
        seasonStatsContainer.addEventListener('click', function(e) {
            if (e.target.closest('.remove-season-stat')) {
                const statEntry = e.target.closest('.season-stat-entry');
                // Don't remove if it's the last entry
                if (seasonStatsContainer.children.length > 1) {
                    statEntry.remove();
                }
            }
        });
    });
    </script>
</body>
</html>

                      
                     
                      
                
                
                    